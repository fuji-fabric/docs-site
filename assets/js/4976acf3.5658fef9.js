"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4684],{5644:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>a,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"Modules/command_permission","title":"command_permission","description":"Overview","source":"@site/docs/02-Modules/command_permission.md","sourceDirName":"02-Modules","slug":"/Modules/command_permission","permalink":"/Modules/command_permission","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"command_permission"},"sidebar":"documentSidebar","previous":{"title":"command_meta.when_online","permalink":"/Modules/command_meta.when_online"},"next":{"title":"command_rewrite","permalink":"/Modules/command_rewrite"}}');var o=n(4848),d=n(8453);const c={title:"command_permission"},r="Module: command_permission",l={},t=[{value:"Overview",id:"overview",level:2},{value:"Color Boxes",id:"color-boxes",level:2},{value:"Configurations",id:"configurations",level:2},{value:"Commands",id:"commands",level:2}];function m(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"module-command_permission",children:"Module: command_permission"})}),"\n",(0,o.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(s.admonition,{type:"module",children:(0,o.jsxs)(s.p,{children:["This module provides the ",(0,o.jsx)(s.code,{children:"luckperms permissions"})," for ",(0,o.jsx)(s.code,{children:"all commands"}),"."]})}),"\n",(0,o.jsx)(s.h2,{id:"color-boxes",children:"Color Boxes"}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-note",children:[(0,o.jsx)(s.p,{children:"\u25c9 How it works?"}),(0,o.jsxs)(s.p,{children:["The vanilla Minecraft use a command system, named ",(0,o.jsx)(s.code,{children:"brigadier command system"}),"."]}),(0,o.jsxs)(s.p,{children:["All ",(0,o.jsx)(s.code,{children:"commands"})," are ",(0,o.jsx)(s.code,{children:"registered"}),", ",(0,o.jsx)(s.code,{children:"parsed"})," and ",(0,o.jsx)(s.code,{children:"executed"})," by this system."]}),(0,o.jsxs)(s.p,{children:["In the design of this command system, all commands are built into a ",(0,o.jsx)(s.code,{children:"tree structure"}),"."]}),(0,o.jsxs)(s.p,{children:["That is the ",(0,o.jsx)(s.code,{children:"command tree"}),"."]}),(0,o.jsxs)(s.p,{children:["All commands starts with the ",(0,o.jsx)(s.code,{children:"root command"}),", and walking down the ",(0,o.jsx)(s.code,{children:"path"})," of the ",(0,o.jsx)(s.code,{children:"command tree"}),"."]}),(0,o.jsxs)(s.p,{children:["All commands are a ",(0,o.jsx)(s.code,{children:"direct child"})," or ",(0,o.jsx)(s.code,{children:"in-direct child"})," of the ",(0,o.jsx)(s.code,{children:"root command node"}),"."]}),(0,o.jsxs)(s.p,{children:["Based on these facts, we can ",(0,o.jsx)(s.code,{children:"identify"})," a ",(0,o.jsx)(s.code,{children:"command node"})," using its ",(0,o.jsx)(s.code,{children:"path"})," in the ",(0,o.jsx)(s.code,{children:"command tree"}),"."]}),(0,o.jsxs)(s.p,{children:["For example, the command string ",(0,o.jsx)(s.code,{children:"/gamemode creative Steve"}),"."]}),(0,o.jsxs)(s.p,{children:["Can be parsed into command nodes: ",(0,o.jsx)(s.code,{children:"gamemode"}),", ",(0,o.jsx)(s.code,{children:"creative"})," and ",(0,o.jsx)(s.code,{children:"Steve"}),"."]}),(0,o.jsxs)(s.p,{children:["And its ",(0,o.jsx)(s.code,{children:"command path"})," is ",(0,o.jsx)(s.code,{children:"gamemode.gamemode.target"}),"."]}),(0,o.jsxs)(s.p,{children:["You can issue ",(0,o.jsx)(s.code,{children:"/command-permission describe gamemode creative Steve"})," to see what is happening."]}),(0,o.jsxs)(s.p,{children:["To see the ",(0,o.jsx)(s.code,{children:"tree structure"})," of this command node, issue ",(0,o.jsx)(s.code,{children:"/help gamemode"})," command."]}),(0,o.jsxs)(s.p,{children:["To open the command permission GUI, issue ",(0,o.jsx)(s.code,{children:"/command-permission gui"})," command."]}),(0,o.jsxs)(s.p,{children:["To list all commands and their command path, issue ",(0,o.jsx)(s.code,{children:"/fuji inspect server-commands"})," command."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-note",children:[(0,o.jsxs)(s.p,{children:["Let's continue, the ",(0,o.jsx)(s.code,{children:"brigadier command system"}),", organize all ",(0,o.jsx)(s.code,{children:"command nodes"})," into a ",(0,o.jsx)(s.code,{children:"tree structure"}),"."]}),(0,o.jsxs)(s.p,{children:["And for each ",(0,o.jsx)(s.code,{children:"command node"}),", there is a ",(0,o.jsx)(s.code,{children:"requirement"})," option, it's a ",(0,o.jsx)(s.code,{children:"predicate"}),", to decide whether the ",(0,o.jsx)(s.code,{children:"command source"})," can use this ",(0,o.jsx)(s.code,{children:"command node"}),"."]}),(0,o.jsx)(s.p,{children:"That's the core part."}),(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"command_permission"})," module, will walk down the entire ",(0,o.jsx)(s.code,{children:"command tree"}),"."]}),(0,o.jsxs)(s.p,{children:["And ",(0,o.jsx)(s.code,{children:"wrap"})," the ",(0,o.jsx)(s.code,{children:"requirement"})," option for each ",(0,o.jsx)(s.code,{children:"command node"}),"."]}),(0,o.jsxs)(s.p,{children:["And then, we can assign a ",(0,o.jsx)(s.code,{children:"luckperms permission"})," for each ",(0,o.jsx)(s.code,{children:"command node"}),"."]}),(0,o.jsxs)(s.p,{children:["That's because, we can ",(0,o.jsx)(s.code,{children:"identify"})," a ",(0,o.jsx)(s.code,{children:"command node"})," using its ",(0,o.jsx)(s.code,{children:"command path"})," in the ",(0,o.jsx)(s.code,{children:"command tree"}),"."]}),(0,o.jsxs)(s.p,{children:["Issue: ",(0,o.jsx)(s.code,{children:"/command-permission describe gamemode creative Steve"})," to see how it works."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-note",children:[(0,o.jsxs)(s.p,{children:["\u25c9 How does ",(0,o.jsx)(s.code,{children:"command_permission"})," module handles the ",(0,o.jsx)(s.code,{children:"inheritance permission"}),", ",(0,o.jsx)(s.code,{children:"wildcard permission"})," and ",(0,o.jsx)(s.code,{children:"regex permission"}),"?"]}),(0,o.jsxs)(s.p,{children:["Actually, the ",(0,o.jsx)(s.code,{children:"command_permission"})," module didn't handle them."]}),(0,o.jsxs)(s.p,{children:["The module only does one simple thing: Let's check if the command source has the corresponding luckperms permission ",(0,o.jsx)(s.code,{children:"fuji.permission.<command path of that target command>"}),"."]}),(0,o.jsxs)(s.p,{children:["The complex things like ",(0,o.jsx)(s.code,{children:"inheritance permission"}),", ",(0,o.jsx)(s.code,{children:"wildcard permission"})," and ",(0,o.jsx)(s.code,{children:"regex permission"})," are all processed by ",(0,o.jsx)(s.code,{children:"luckperms"})," mod."]}),(0,o.jsxs)(s.p,{children:["Yeah, the ",(0,o.jsx)(s.code,{children:"luckperms"})," mod does the complex ",(0,o.jsx)(s.code,{children:"permission calculation"}),"."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-note",children:[(0,o.jsx)(s.p,{children:"\u25c9 Advanced universal permission mod."}),(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"command_permission"})," module was originally inspired by the ",(0,o.jsx)(s.code,{children:"Vanilla Permissions"})," mod."]}),(0,o.jsxs)(s.p,{children:["If you want advanced features, check ",(0,o.jsx)(s.code,{children:"Vanilla Permissions"})," mod."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-tip",children:[(0,o.jsx)(s.p,{children:"\u25c9 Advanced Usage"}),(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"luckperms"})," mod have a feature named ",(0,o.jsx)(s.code,{children:"permission context"}),"."]}),(0,o.jsxs)(s.p,{children:["Which allows you to specify the ",(0,o.jsx)(s.code,{children:"per-dimension permission"})," and ",(0,o.jsx)(s.code,{children:"temporary permission"}),"."]}),(0,o.jsx)(s.p,{children:"If you are interested, see the details in their official wiki."})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsxs)(s.p,{children:["\u25c9 Allow everyone to use ",(0,o.jsx)(s.code,{children:"/gamemode"})," command."]}),(0,o.jsxs)(s.p,{children:["You can issue ",(0,o.jsx)(s.code,{children:"/lp group default permission set fuji.permission.gamemode true"})]}),(0,o.jsxs)(s.p,{children:["NOTE: If you want to allow the client-side to use the gamemode switcher menu, you have to install extra mods in the client-side, to let the client-side believe they are ",(0,o.jsx)(s.code,{children:"op"}),", and they can switch the gamemode."]}),(0,o.jsxs)(s.p,{children:["The mod can be ",(0,o.jsx)(s.a,{href:"https://modrinth.com/mod/switcher",children:"https://modrinth.com/mod/switcher"})]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsxs)(s.p,{children:["\u25c9 Allow everyone to use ",(0,o.jsx)(s.code,{children:"/gamemode"})," command, except the player Alice."]}),(0,o.jsx)(s.p,{children:"Issue the commands:"}),(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.code,{children:"/lp group default permission set fuji.permission.gamemode true"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.code,{children:"/lp user Alice permission set fuji.permission.gamemode false"})}),"\n"]}),"\n"]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsxs)(s.p,{children:["\u25c9 Allow everyone to use ",(0,o.jsx)(s.code,{children:"/gamemode spectator"}),", but disallows the ",(0,o.jsx)(s.code,{children:"/gamemode creative"}),"."]}),(0,o.jsx)(s.p,{children:"You have touch the core, and the tricky things."}),(0,o.jsxs)(s.p,{children:["Now, issue ",(0,o.jsx)(s.code,{children:"/command-permission describe gamemode spectator"})," command."]}),(0,o.jsxs)(s.p,{children:["You will find that, the second command node ",(0,o.jsx)(s.code,{children:"creative"})," is actually ",(0,o.jsx)(s.code,{children:"an argument"}),"."]}),(0,o.jsxs)(s.p,{children:["Its ",(0,o.jsx)(s.code,{children:"argument"})," whose argument type is ",(0,o.jsx)(s.code,{children:"gamemode"}),", and accepts the possible values ",(0,o.jsx)(s.code,{children:"adventure"}),", ",(0,o.jsx)(s.code,{children:"creative"}),", ",(0,o.jsx)(s.code,{children:"spectator"})," and ",(0,o.jsx)(s.code,{children:"survival"}),"."]}),(0,o.jsxs)(s.p,{children:["All 4 gamemodes are possible values for ",(0,o.jsx)(s.code,{children:"gamemode argument type"}),"."]}),(0,o.jsxs)(s.p,{children:["That's the reason why you can't just ban the ",(0,o.jsx)(s.code,{children:"creative"})," gamemode."]}),(0,o.jsxs)(s.p,{children:["If you really want to allow the user to use ",(0,o.jsx)(s.code,{children:"/gamemode spectator"}),", and ban the ",(0,o.jsx)(s.code,{children:"/gamemode creative"}),"."]}),(0,o.jsxs)(s.p,{children:["You can use ",(0,o.jsx)(s.code,{children:"command_bundle"})," to create a ",(0,o.jsx)(s.code,{children:"user-level"})," command, to wrap the ",(0,o.jsx)(s.code,{children:"/gamemode"})," command."]}),(0,o.jsxs)(s.p,{children:["Like, create a new command named ",(0,o.jsx)(s.code,{children:"/switch-to-survival"}),", as a wrapper command for ",(0,o.jsx)(s.code,{children:"/gamemode"})," command."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsxs)(s.p,{children:["\u25c9 Allow players to use ",(0,o.jsx)(s.code,{children:"/seed"})," command."]}),(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"/seed"})," command provided by Mojang, requires ",(0,o.jsx)(s.code,{children:"level permission"})," to be ",(0,o.jsx)(s.code,{children:"3"})," to use."]}),(0,o.jsxs)(s.p,{children:["If you want to ",(0,o.jsx)(s.code,{children:"allow"})," players to use ",(0,o.jsx)(s.code,{children:"/seed"})," command, but you don't want to grant ",(0,o.jsx)(s.code,{children:"op"})," for them."]}),(0,o.jsxs)(s.p,{children:["Then, you can ",(0,o.jsx)(s.code,{children:"set"})," a ",(0,o.jsx)(s.code,{children:"positive string permission"})," for them."]}),(0,o.jsxs)(s.p,{children:["Issue ",(0,o.jsx)(s.code,{children:"/lp group default permission set fuji.permission.seed true"}),"."]}),(0,o.jsxs)(s.p,{children:["It says ",(0,o.jsx)(s.code,{children:"allow"})," the players to use ",(0,o.jsx)(s.code,{children:"/seed"})," command."]}),(0,o.jsxs)(s.p,{children:["Issue ",(0,o.jsx)(s.code,{children:"/command-permission describe seed"})," command, to see how it works."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsxs)(s.p,{children:["\u25c9 Dis-allow players to use ",(0,o.jsx)(s.code,{children:"/list"})," command."]}),(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"/list"})," command provided by Mojang, requires ",(0,o.jsx)(s.code,{children:"level permission"})," to be ",(0,o.jsx)(s.code,{children:"0"})," to use."]}),(0,o.jsxs)(s.p,{children:["If you want to ",(0,o.jsx)(s.code,{children:"dis-allow"})," players to use ",(0,o.jsx)(s.code,{children:"/list"})," command."]}),(0,o.jsx)(s.p,{children:"But because this command requires no string permission to use."}),(0,o.jsxs)(s.p,{children:["So it's impossible to ban it via ",(0,o.jsx)(s.code,{children:"luckperms"})," mod."]}),(0,o.jsxs)(s.p,{children:["In this case, you ",(0,o.jsx)(s.code,{children:"can"})," set a ",(0,o.jsx)(s.code,{children:"negative string permission"})," for them."]}),(0,o.jsxs)(s.p,{children:["Issue ",(0,o.jsx)(s.code,{children:"/lp group default permission set fuji.permission.list false"}),"."]}),(0,o.jsxs)(s.p,{children:["It says ",(0,o.jsx)(s.code,{children:"dis-allow"})," the players to use ",(0,o.jsx)(s.code,{children:"/list"})," command."]}),(0,o.jsxs)(s.p,{children:["Issue ",(0,o.jsx)(s.code,{children:"/command-permission describe list"})," command, to see how it works."]})]}),"\n",(0,o.jsxs)(s.admonition,{type:"colorbox-example",children:[(0,o.jsx)(s.p,{children:"\u25c9 Unset the override of requirement of a specific command."}),(0,o.jsxs)(s.p,{children:["To ",(0,o.jsx)(s.code,{children:"undo"})," the operation in the ",(0,o.jsx)(s.code,{children:"/seed"})," example."]}),(0,o.jsxs)(s.p,{children:["You can ",(0,o.jsx)(s.code,{children:"unset"})," the assigned permission before."]}),(0,o.jsxs)(s.p,{children:["Issue ",(0,o.jsx)(s.code,{children:"/lp group default permission unset fuji.permission.seed"})," command, to unset the assign permission."]})]}),"\n",(0,o.jsx)(s.h2,{id:"configurations",children:"Configurations"}),"\n",(0,o.jsxs)(s.admonition,{type:"warning",children:[(0,o.jsx)(s.p,{children:"The JSON content is provided for documentation purposes only."}),(0,o.jsx)(s.p,{children:"It should not be copied directly into your configuration folder, as the document format is not valid JSON syntax."})]}),"\n",(0,o.jsxs)(s.admonition,{type:"config",children:[(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["File Name: ",(0,o.jsx)(s.code,{children:"config.json"})]}),"\n",(0,o.jsx)(s.li,{children:"File Content:"}),"\n"]}),(0,o.jsxs)(n,{children:[(0,o.jsx)("summary",{children:"Click to expand..."}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-json",metastring:'showLineNumbers title="config/fuji/modules/command_permission/config.json"',children:'{\n  /* You can define `rules` to handle `special case`.\n  If the `command permission` is `matched` by the `rule`.\n  We return the pre-defined `permission test result` directly, without asking the luckperms.\n  \n  The `rules` can be used to handle `special case`.\n  For example, if you enable the `permission implicitly inheritance` feature, and grant a `root permission` like `fuji.permission.fly`.\n  You want to allow the players to use `/fly`, whose permission is `fuji.permission.fly`.\n  But you don\'t want the players to use `/fly others <player>`, whose permission is `fuji.permission.fly.others.others`.\n  In this case, you just enable the `permission implicitly inheritance` feature, and grant the `root permission`, then use rules to `exclude` special cases.\n  \n  NOTE: <red>Pre-defined rules only applied to non-operator players.</red> */\n  "rules": [\n    {\n      "permission_pattern_regex": "fuji.permission.*others.*",\n      "permission_test_result": "DENY_TO_USE_THE_COMMAND"\n    }\n  ]\n}\n'})})]})]}),"\n",(0,o.jsx)(s.h2,{id:"commands",children:"Commands"}),"\n",(0,o.jsx)(s.admonition,{type:"command",children:(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Command Syntax: ",(0,o.jsx)(s.code,{children:"/command-permission describe <GreedyString command>"})]}),"\n",(0,o.jsxs)(s.li,{children:["Document: Describe the ",(0,o.jsx)(s.code,{children:"required permissions"})," of ",(0,o.jsx)(s.code,{children:"the given command"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Can be executed by console: ",(0,o.jsx)(s.code,{children:"true"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required Level Permission: ",(0,o.jsx)(s.code,{children:"4"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required String Permission: ",(0,o.jsx)(s.code,{children:"null"})]}),"\n"]})}),"\n",(0,o.jsx)(s.admonition,{type:"command",children:(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Command Syntax: ",(0,o.jsx)(s.code,{children:"/command-permission gui"})]}),"\n",(0,o.jsx)(s.li,{children:"Document: Open the command permission gui."}),"\n",(0,o.jsxs)(s.li,{children:["Can be executed by console: ",(0,o.jsx)(s.code,{children:"false"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required Level Permission: ",(0,o.jsx)(s.code,{children:"4"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required String Permission: ",(0,o.jsx)(s.code,{children:"null"})]}),"\n"]})}),"\n",(0,o.jsx)(s.admonition,{type:"command",children:(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Command Syntax: ",(0,o.jsx)(s.code,{children:"/command-permission verbose"})]}),"\n",(0,o.jsx)(s.li,{children:"Document: Toggle the command permission verbose mode."}),"\n",(0,o.jsxs)(s.li,{children:["Can be executed by console: ",(0,o.jsx)(s.code,{children:"true"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required Level Permission: ",(0,o.jsx)(s.code,{children:"4"})]}),"\n",(0,o.jsxs)(s.li,{children:["Required String Permission: ",(0,o.jsx)(s.code,{children:"null"})]}),"\n"]})})]})}function a(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>r});var i=n(6540);const o={},d=i.createContext(o);function c(e){const s=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);