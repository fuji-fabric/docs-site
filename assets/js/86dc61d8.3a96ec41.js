"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7945],{4113:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"Modules/command_advice","title":"command_advice","description":"Overview","source":"@site/docs/02-Modules/command_advice.md","sourceDirName":"02-Modules","slug":"/Modules/command_advice","permalink":"/Modules/command_advice","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"command_advice"},"sidebar":"documentSidebar","previous":{"title":"color.sign","permalink":"/Modules/color.sign"},"next":{"title":"command_alias","permalink":"/Modules/command_alias"}}');var d=c(4848),a=c(8453);const r={title:"command_advice"},i="Module: command_advice",s={},t=[{value:"Overview",id:"overview",level:2},{value:"Color Boxes",id:"color-boxes",level:2},{value:"Configurations",id:"configurations",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:c}=n;return c||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"module-command_advice",children:"Module: command_advice"})}),"\n",(0,d.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsxs)(n.admonition,{type:"module",children:[(0,d.jsxs)(n.p,{children:["This module allows you to define ",(0,d.jsx)(n.code,{children:"advices"})," to decorate ",(0,d.jsx)(n.code,{children:"an existing target command"}),"."]}),(0,d.jsx)(n.p,{children:"The command advice types can be:"}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"BEFORE_EXECUTION"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"AFTER_EXECUTION"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"ON_EXECUTION_SUCCESS"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"ON_EXECUTION_FAILURE"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"ON_EXECUTION_CANCELLED"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"CANCEL_AS_SUCCESS"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"CANCEL_AS_FAILURE"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"CANCEL_IF_ANY_SUCCESS"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"CANCEL_IF_ALL_SUCCESS"})}),"\n",(0,d.jsx)(n.li,{children:"..."}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"color-boxes",children:"Color Boxes"}),"\n",(0,d.jsxs)(n.admonition,{type:"colorbox-note",children:[(0,d.jsxs)(n.p,{children:["\u25c9 Semantics of each ",(0,d.jsx)(n.code,{children:"advice type"}),"."]}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"BEFORE_EXECUTION"}),": Run specified commands ",(0,d.jsx)(n.code,{children:"before"})," the execution of target command (If it's not ",(0,d.jsx)(n.code,{children:"cancelled"})," by other advices)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"AFTER_EXECUTION"}),": Run specified commands ",(0,d.jsx)(n.code,{children:"after"})," the execution of target command (Regardless of whether it's ",(0,d.jsx)(n.code,{children:"SUCCESS"})," or ",(0,d.jsx)(n.code,{children:"FAILURE"}),")."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"ON_EXECUTION_SUCCESS"}),": Run specified commands ",(0,d.jsx)(n.code,{children:"if"})," the execution of target command is ",(0,d.jsx)(n.code,{children:"SUCCESS"})," (Return value > 0)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"ON_EXECUTION_FAILURE"}),": Run specified commands ",(0,d.jsx)(n.code,{children:"if"})," the execution of target command is ",(0,d.jsx)(n.code,{children:"FAILURE"})," (Return value = 0)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"ON_EXECUTION_CANCELLED"}),": Run specified commands ",(0,d.jsx)(n.code,{children:"if"})," the execution of target command is ",(0,d.jsx)(n.code,{children:"CANCELLED"})," by other advices."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CANCEL_AS_SUCCESS"}),": Cancel the execution of target command, and treat it as ",(0,d.jsx)(n.code,{children:"SUCCESS"})," (Return value = 1)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CANCEL_AS_FAILURE"}),": Cancel the execution of target command, and treat it as ",(0,d.jsx)(n.code,{children:"FAILURE"})," (Return value = 0)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CANCEL_IF_ANY_SUCCESS"}),": If ",(0,d.jsx)(n.code,{children:"ANY specified command is SUCCESS"}),", then cancel the execution of target command, and treat it as ",(0,d.jsx)(n.code,{children:"FAILURE"})," (Return value = 0)."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CANCEL_IF_ALL_SUCCESS"}),": If ",(0,d.jsx)(n.code,{children:"ALL specified commands are SUCCESS"}),", then cancel the execution of target command, and treat it as ",(0,d.jsx)(n.code,{children:"FAILURE"})," (Return value = 0)."]}),"\n"]}),"\n"]})]}),"\n",(0,d.jsxs)(n.admonition,{type:"colorbox-tip",children:[(0,d.jsxs)(n.p,{children:["\u25c9 Compare between ",(0,d.jsx)(n.code,{children:"command_advice"})," and ",(0,d.jsx)(n.code,{children:"command_bundle"})," module."]}),(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"command_advice"})," module is used to ",(0,d.jsx)(n.code,{children:"decorate"})," an ",(0,d.jsx)(n.code,{children:"existing target command"}),"."]}),(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"command_bundle"})," module is used to ",(0,d.jsx)(n.code,{children:"create"})," a ",(0,d.jsx)(n.code,{children:"new command"}),"."]})]}),"\n",(0,d.jsxs)(n.admonition,{type:"colorbox-example",children:[(0,d.jsxs)(n.p,{children:["\u25c9 ",(0,d.jsx)(n.code,{children:"Decorate"})," an existing target command."]}),(0,d.jsxs)(n.p,{children:["See the example for ",(0,d.jsx)(n.code,{children:"/heal"})," command in default config."]}),(0,d.jsxs)(n.p,{children:["\u25c9 ",(0,d.jsx)(n.code,{children:"Cancel"})," the execution of target command, and execute specified commands instead."]}),(0,d.jsxs)(n.p,{children:["See the example for ",(0,d.jsx)(n.code,{children:"/say"})," command in default config."]}),(0,d.jsxs)(n.p,{children:["\u25c9 Ensure that the target command executes only when the specified ",(0,d.jsx)(n.code,{children:"conditions"})," are met, and apply the ",(0,d.jsx)(n.code,{children:"cost"})," if the execution succeeds."]}),(0,d.jsxs)(n.p,{children:["See the example for ",(0,d.jsx)(n.code,{children:"/repair"})," command in default config:"]}),(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Use ",(0,d.jsx)(n.code,{children:"CANCEL_IF_ANY_SUCCESS"})," advice type, to check the ",(0,d.jsx)(n.code,{children:"conditions"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Use ",(0,d.jsx)(n.code,{children:"ON_EXECUTION_CANCELLED"})," advice type, to send ",(0,d.jsx)(n.code,{children:"feedback"})," if conditions are not met."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Use ",(0,d.jsx)(n.code,{children:"ON_EXECUTION_SUCCESS"})," advice type, to apply the ",(0,d.jsx)(n.code,{children:"cost"})," for the execution of target command."]}),"\n"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"configurations",children:"Configurations"}),"\n",(0,d.jsxs)(n.admonition,{type:"warning",children:[(0,d.jsx)(n.p,{children:"The JSON content is provided for documentation purposes only."}),(0,d.jsx)(n.p,{children:"It should not be copied directly into your configuration folder, as the document format is not valid JSON syntax."})]}),"\n",(0,d.jsxs)(n.admonition,{type:"config",children:[(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["File Name: ",(0,d.jsx)(n.code,{children:"config.json"})]}),"\n",(0,d.jsx)(n.li,{children:"File Content:"}),"\n"]}),(0,d.jsxs)(c,{children:[(0,d.jsx)("summary",{children:"Click to expand..."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",metastring:'showLineNumbers title="config/fuji/modules/command_advice/config.json"',children:'{\n  /* Define `advices` for the `target command`. */\n  "advices": [\n    {\n      "enable": true,\n      "document": "Spawn a heart particle after the execution of `/heal` command.",\n      "matcher": {\n        "command_string_regex": "heal",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "AFTER_EXECUTION",\n      "commands": [\n        "say Display the heard particle for player %player:name%",\n        "run as fake-op %player:name% --silent true particle minecraft:heart ~ ~1 ~ 0.6 0.6 0.6 0 20 force %player:name%"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Replace the execution of `/say` command with the `/send-broadcast` command.",\n      "matcher": {\n        "command_string_regex": "say (.+)",\n        "accept_player_command_source": true,\n        "accept_console_command_source": true\n      },\n      "advice_type": "CANCEL_AS_SUCCESS",\n      "commands": [\n        "send-broadcast <rb>[My Server]</rb> $1"\n      ]\n    },\n    {\n      "enable": false,\n      "document": "Replace the execution of `/msg` command with our own DIY `/send-message` command.",\n      "matcher": {\n        "command_string_regex": "(?:msg|tell) (\\\\S+?) (.+)",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "CANCEL_AS_SUCCESS",\n      "commands": [\n        "send-message %player:name% <green>[PM] You -> $1: $2",\n        "send-message $1 <green>[PM] %player:name% -> you: $2"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Print a message before the execution of `/repair` command.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "BEFORE_EXECUTION",\n      "commands": [\n        "send-message %player:name% <pink>Before the execution of `/repair` command for %player:name%"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Print a message after the execution of `/repair` command.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "AFTER_EXECUTION",\n      "commands": [\n        "send-message %player:name% <pink>After the execution of `/repair` command for %player:name%"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Cancel the execution of `/repair` command, if the player doesn\'t have the required items in their inventory.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "CANCEL_IF_ANY_SUCCESS",\n      "commands": [\n        "NOT has-item? %player:name% minecraft:iron_ingot 16",\n        "NOT has-item? %player:name% minecraft:gold_ingot 16"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Send a feedback message when the execution of `/repair` command is cancelled.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "ON_EXECUTION_CANCELLED",\n      "commands": [\n        "send-message %player:name% <red>You need `iron_ingot x 16` and `gold_ingot x 16` to use the `/repair` command."\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Take required items from the player\'s inventory, when the execution of `/repair` command is SUCCESS.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "ON_EXECUTION_SUCCESS",\n      "commands": [\n        "send-message %player:name% The `/repair` command execution result is `SUCCESS`, I will take `iron_ingot x 16` and `gold_ingot x 16` from your inventory.",\n        "clear %player:name% minecraft:iron_ingot 16",\n        "clear %player:name% minecraft:gold_ingot 16"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Print a message, when the execution of `/repair` command is FAILURE.",\n      "matcher": {\n        "command_string_regex": "repair",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "ON_EXECUTION_FAILURE",\n      "commands": [\n        "send-message %player:name% The `/repair` command execution result is `FAILURE`, I will do nothing."\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Cancel the dangerous `/kill @e` command.",\n      "matcher": {\n        "command_string_regex": "kill @e",\n        "accept_player_command_source": true,\n        "accept_console_command_source": true\n      },\n      "advice_type": "CANCEL_AS_FAILURE",\n      "commands": [\n        "send-message %player:name% <red>The `/kill @e` command should be used with a filter."\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Add a `exempt` feature for `/view inv <player>` command.",\n      "matcher": {\n        "command_string_regex": "view inv (.+)",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "CANCEL_IF_ALL_SUCCESS",\n      "commands": [\n        "has-perm? $1 your.custom.permission"\n      ]\n    },\n    {\n      "enable": true,\n      "document": "Add a `exempt` feature for `/view inv <player>` command.",\n      "matcher": {\n        "command_string_regex": "view inv (.+)",\n        "accept_player_command_source": true,\n        "accept_console_command_source": false\n      },\n      "advice_type": "ON_EXECUTION_CANCELLED",\n      "commands": [\n        "send-message %player:name% <red>You can\'t view the inventory of $1 player, it\'s exempted."\n      ]\n    }\n  ]\n}\n'})})]})]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>r,x:()=>i});var o=c(6540);const d={},a=o.createContext(d);function r(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);